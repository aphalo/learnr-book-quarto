<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>First edition (2020) – Learn R: As a Language</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./r4p-favicon.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-0626ff4d7a71b55c8707dcae1d04a9b6.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-91e307a53322d72c00222074f9709f26.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Learn R: As a Language</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-book" role="link" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-book" role="img">
</i> 
 <span class="menu-text">Book</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-book">    
        <li>
    <a class="dropdown-item" href="./contents-2ed.html"><i class="bi bi-list-columns" role="img">
</i> 
 <span class="dropdown-text">Contents (2ed)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./preface-2ed.html"><i class="bi bi-book" role="img">
</i> 
 <span class="dropdown-text">Preface (2ed)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./contents-1ed.html"><i class="bi bi-list-columns" role="img">
</i> 
 <span class="dropdown-text">Contents (1ed)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./preface-1ed.html"><i class="bi bi-book" role="img">
</i> 
 <span class="dropdown-text">Preface (1ed)</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-r-code" role="link" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-paperclip" role="img">
</i> 
 <span class="menu-text">R code</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-r-code">    
        <li>
    <a class="dropdown-item" href="https://docs.r4photobiology.info/learnrbook/"><i class="bi bi-box-seam" role="img">
</i> 
 <span class="dropdown-text">‘learnrbook’ package</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./wordcloud.html"><i class="bi bi-file" role="img">
</i> 
 <span class="dropdown-text">Wordcloud (cover)</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-also-by-the-author" role="link" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-folder2-open" role="img">
</i> 
 <span class="menu-text">Also by the author</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-also-by-the-author">    
        <li>
    <a class="dropdown-item" href="https://www.r4photobiology.info/r-index.html"><i class="bi bi-file-richtext" role="img">
</i> 
 <span class="dropdown-text">Web pages on R</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://docs.r4photobiology.info/"><i class="bi bi-journals" role="img">
</i> 
 <span class="dropdown-text">Packages (HTML documentation)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://aphalo.r-universe.dev/"><i class="bi bi-rocket-takeoff" role="img">
</i> 
 <span class="dropdown-text">Packages (at R-Universe)</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> <i class="bi bi-person" role="img">
</i> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/aphalo/learnr-book-crc"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text">GitHub</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#the-book" id="toc-the-book" class="nav-link active" data-scroll-target="#the-book"><span class="header-section-number">1</span> The Book</a>
  <ul class="collapse">
  <li><a href="#book-citation" id="toc-book-citation" class="nav-link" data-scroll-target="#book-citation">Book citation</a></li>
  </ul></li>
  <li><a href="#the-chapters" id="toc-the-chapters" class="nav-link" data-scroll-target="#the-chapters"><span class="header-section-number">2</span> The Chapters</a>
  <ul class="collapse">
  <li><a href="#preface" id="toc-preface" class="nav-link" data-scroll-target="#preface">Preface</a></li>
  <li><a href="#r-the-language-and-the-program" id="toc-r-the-language-and-the-program" class="nav-link" data-scroll-target="#r-the-language-and-the-program">1. R: The language and the program</a></li>
  <li><a href="#the-r-language-words-and-sentences" id="toc-the-r-language-words-and-sentences" class="nav-link" data-scroll-target="#the-r-language-words-and-sentences">2. The R language: “Words” and “sentences”</a></li>
  <li><a href="#the-r-language-paragraphs-and-essays" id="toc-the-r-language-paragraphs-and-essays" class="nav-link" data-scroll-target="#the-r-language-paragraphs-and-essays">3. The R language: “Paragraphs” and “essays”</a></li>
  <li><a href="#the-r-language-statistics" id="toc-the-r-language-statistics" class="nav-link" data-scroll-target="#the-r-language-statistics">4. The R language: Statistics</a></li>
  <li><a href="#the-r-language-adding-new-words" id="toc-the-r-language-adding-new-words" class="nav-link" data-scroll-target="#the-r-language-adding-new-words">5. The R language: Adding new “words”</a></li>
  <li><a href="#new-grammars-of-data" id="toc-new-grammars-of-data" class="nav-link" data-scroll-target="#new-grammars-of-data">6. New grammars of data</a></li>
  <li><a href="#grammar-of-graphics" id="toc-grammar-of-graphics" class="nav-link" data-scroll-target="#grammar-of-graphics">7. Grammar of graphics</a></li>
  <li><a href="#data-import-and-export" id="toc-data-import-and-export" class="nav-link" data-scroll-target="#data-import-and-export">8. Data import and export</a></li>
  </ul></li>
  <li><a href="#free-supplementary-chapters" id="toc-free-supplementary-chapters" class="nav-link" data-scroll-target="#free-supplementary-chapters"><span class="header-section-number">3</span> Free supplementary chapters</a>
  <ul class="collapse">
  <li><a href="#grammar-of-graphics-fonts" id="toc-grammar-of-graphics-fonts" class="nav-link" data-scroll-target="#grammar-of-graphics-fonts">9. Grammar of Graphics: Fonts</a></li>
  <li><a href="#grammar-of-graphics-color-palettes" id="toc-grammar-of-graphics-color-palettes" class="nav-link" data-scroll-target="#grammar-of-graphics-color-palettes">10. Grammar of Graphics: Color palettes</a></li>
  <li><a href="#a.-case-timeline-plots" id="toc-a.-case-timeline-plots" class="nav-link" data-scroll-target="#a.-case-timeline-plots">A. Case: Timeline plots</a></li>
  </ul></li>
  <li><a href="#issues-in-the-book-chapters" id="toc-issues-in-the-book-chapters" class="nav-link" data-scroll-target="#issues-in-the-book-chapters"><span class="header-section-number">4</span> Issues in the book chapters</a></li>
  <li><a href="#issues-in-supplementary-chapters" id="toc-issues-in-supplementary-chapters" class="nav-link" data-scroll-target="#issues-in-supplementary-chapters"><span class="header-section-number">5</span> Issues in supplementary chapters</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">First edition (2020)</h1>
<p class="subtitle lead">Contents and chapter summaries</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://www.routledge.com/Learn-R-As-a-Language/Aphalo/p/book/9780367182533"><img src="images/frontcover-9780367182533-scaled.jpg" class="img-fluid figure-img" style="width:40.0%" alt="The book cover (1ed)"></a></p>
<figcaption>The book cover (1ed)</figcaption>
</figure>
</div>
<section id="the-book" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> The Book</h1>
<p>Learn <em>R: As a Language</em> (1ed) was authored by Pedro J. Aphalo and published in 2020 in the <em>The R Series</em> by Chapman and Hall/CRC.</p>
<section id="book-citation" class="level2">
<h2 class="anchored" data-anchor-id="book-citation">Book citation</h2>
<p>Aphalo, Pedro J. (2020) <em>Learn R: As a Language,</em> 1 ed.&nbsp;Boca Raton: CRC/Taylor &amp; Francis Ltd (The R Series). ISBN: 9780367182533. (364 pages, 114 colour illustrations.)</p>
<pre><code>@Book{Aphalo2020,
  author    = {Pedro J. Aphalo},
  date      = {2020},
  title     = {Learn R: As a Language},
  edition   = {1},
  isbn      = {9780367182533},
  pagetotal = {364},
  publisher = {CRC/Taylor &amp; Francis Ltd},
  series    = {The R Series},
}</code></pre>
</section>
</section>
<section id="the-chapters" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> The Chapters</h1>
<section id="preface" class="level2">
<h2 class="anchored" data-anchor-id="preface">Preface</h2>
</section>
<section id="r-the-language-and-the-program" class="level2">
<h2 class="anchored" data-anchor-id="r-the-language-and-the-program">1. R: The language and the program</h2>
<p>In this chapter you will learn some facts about the history and design aims behind the R language, its implementation in the R program, and how it is used in actual practice when sitting at a computer. You will learn the difference between typing commands interactively, reading each partial response from R on the screen as you type versus using R scripts to execute a “job” which saves results for later inspection by the user.</p>
<p>I will describe the advantages and disadvantages of textual command languages such as R compared to menu-driven user interfaces as frequently used in other statistics software and occasionally also with R. I will discuss the role of textual languages in the very important question of reproducibility of data analyses.</p>
<p>Finally you will learn about the different types and sources of help available to R users, and how to best make use of them.</p>
</section>
<section id="the-r-language-words-and-sentences" class="level2">
<h2 class="anchored" data-anchor-id="the-r-language-words-and-sentences">2. The R language: “Words” and “sentences”</h2>
<p>In my experience, for those not familiar with computer programming languages, the best first step in learning the R language is to use it interactively by typing tex- tual commands at the console or command line. This will teach not only the syntax and grammar rules, but also give you a glimpse at the advantages and flexibility of this approach to data analysis.</p>
<p>In the first part of the chapter we will use R to do everyday calculations that should be so easy and familiar that you will not need to think about the operations themselves. This easy start will give you a chance to focus on learning how to issue textual commands at the command prompt.</p>
<p>Later in the chapter, you will gradually need to focus more on the R language and its grammar and less on how commands are entered. By the end of the chapter you will be familiar with most of the kinds of “words” used in the R language and you will be able to write simple “sentences” in R.</p>
<p>Along the chapter, I will occasionally show the equivalent of the R code in math- ematical notation. If you are not familiar with the mathematical notation, you can safely ignore it, as long as you understand the R code.</p>
</section>
<section id="the-r-language-paragraphs-and-essays" class="level2">
<h2 class="anchored" data-anchor-id="the-r-language-paragraphs-and-essays">3. The R language: “Paragraphs” and “essays”</h2>
<p>For those who have mainly used graphical user interfaces, understanding why and when scripts can help in communicating a certain data analysis protocol can be revelatory. As soon as a data analysis stops being trivial, describing the steps fol- lowed through a system of menus and dialogue boxes becomes extremely tedious. Moreover, graphical user interfaces tend to be difficult to extend or improve in a way that keeps step-by-step instructions valid across program versions and operating systems.</p>
<p>Many times, exactly the same sequence of commands needs to be applied to different data sets, and scripts make both implementation and validation of such a requirement easy.</p>
<p>In this chapter, I will walk you through the use of R scripts, starting from an extremely simple script.</p>
</section>
<section id="the-r-language-statistics" class="level2">
<h2 class="anchored" data-anchor-id="the-r-language-statistics">4. The R language: Statistics</h2>
<p>This chapter aims to give the reader only a quick introduction to statistics in base R, as there are many good texts on the use of R for different kinds of statistical analyses (see further reading on page 161). Although many of base R’s functions are specific to given statistical procedures, they use a particular approach to model specification and for returning the computed values that can be considered a part of the R language. Here you will learn the approaches used in R for calculating sta- tistical summaries, generating (pseudo-)random numbers, sampling, fitting models and carrying out tests of significance. We will use linear correlation, t-test, linear models, generalized linear models, non-linear models and some simple multivari- ate methods as examples. My aim is teaching how to specify models, contrasts and data used, and how to access different components of the objects returned by the corresponding fit and summary functions.</p>
</section>
<section id="the-r-language-adding-new-words" class="level2">
<h2 class="anchored" data-anchor-id="the-r-language-adding-new-words">5. The R language: Adding new “words”</h2>
<p>In earlier chapters we have only used base R features. In this chapter you will learn how to expand the range of features available. In the first part of the chapter we will focus on using existing packages and how they expand the functionality of R. In the second part you will learn how to define new functions, operators and classes. We will not consider the important, but more advanced question of packaging functions and classes into new R packages.</p>
</section>
<section id="new-grammars-of-data" class="level2">
<h2 class="anchored" data-anchor-id="new-grammars-of-data">6. New grammars of data</h2>
<p>Base R and the recommended extension packages (installed by default) include many functions for manipulating data. The R distribution supplies a complete set of functions and operators that allow all the usual data manipulation operations. These functions have stable and well-described behavior, so they should be pre- ferred unless some of their limitations justify the use of alternatives defined in contributed packages. In the present chapter we aim at describing the new syn- taxes introduced by the most popular of these contributed R extension packages aiming at changing (usually improving one aspect at the expense of another) in var- ious ways how we can manipulate data in R. These independently developed pack- ages extend the R language not only by adding new “words” to it but by supporting new ways of meaningfully connecting “words”—i.e., providing new “grammars” for data manipulation.</p>
</section>
<section id="grammar-of-graphics" class="level2">
<h2 class="anchored" data-anchor-id="grammar-of-graphics">7. Grammar of graphics</h2>
<p>Three main data plotting systems are available to R users: base R, package ‘lattice’ (Sarkar 2008) and package ‘ggplot2’ (Wickham and Sievert 2016), the last one be- ing the most recent and currently most popular system available in R for plotting data. Even two different sets of graphics primitives (i.e., those used to produce the simplest graphical elements such as lines and symbols) are available in R, those in base R and a newer one in the ‘grid’ package (Murrell 2011).</p>
<p>In this chapter you will learn the concepts of the grammar of graphics, on which package ‘ggplot2’ is based. You will also learn how to build several types of data plots with package ‘ggplot2’. As a consequence of the popularity and flexibility of ‘ggplot2’, many contributed packages extending its functionality have been devel- oped and deposited in public repositories. However, I will focus mainly on package ‘ggplot2’ only briefly describing a few of these extensions.</p>
</section>
<section id="data-import-and-export" class="level2">
<h2 class="anchored" data-anchor-id="data-import-and-export">8. Data import and export</h2>
<p>Base R and the recommended packages (installed by default) include several func- tions for importing and exporting data. Contributed packages provide both re- placements for some of these functions and support for several additional file formats. In the present chapter, I aim at describing both data input and output covering in detail only the most common “foreign” data formats (those not native to R).</p>
<p>Data file formats that are foreign to R are not always well defined, making it necessary to reverse-engineer the algorithms needed to read them. These formats, even when clearly defined, may be updated by the developers of the foreign soft- ware that writes the files. Consequently, developing software to read and write files using foreign formats can easily result in long, messy, and ugly R scripts. We can also unwillingly write code that usually works but occasionally fails with specific files, or even worse, occasionally silently corrupts the imported data. The aim of this chapter is to provide guidance for finding functions for reading data encoded using foreign formats, covering both base R, including the ‘foreign’ package, and independently contributed packages. Such functions are well tested or validated.</p>
<p>In this chapter you will familiarize yourself with how to exchange data between R and other applications. The functions <code>save()</code> and <code>load()</code>, and <code>saveRDS()</code> and <code>readRDS()</code>, all of which save and read data in R’s native formats, are described in sections 2.16.2 and 2.16.3 starting on page 79.</p>
</section>
</section>
<section id="free-supplementary-chapters" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Free supplementary chapters</h1>
<p>Available for download as a <a href="&quot;learn-r-extra-web.pdf&quot;">PDF file</a>.</p>
<section id="grammar-of-graphics-fonts" class="level2">
<h2 class="anchored" data-anchor-id="grammar-of-graphics-fonts">9. Grammar of Graphics: Fonts</h2>
</section>
<section id="grammar-of-graphics-color-palettes" class="level2">
<h2 class="anchored" data-anchor-id="grammar-of-graphics-color-palettes">10. Grammar of Graphics: Color palettes</h2>
</section>
<section id="a.-case-timeline-plots" class="level2">
<h2 class="anchored" data-anchor-id="a.-case-timeline-plots">A. Case: Timeline plots</h2>
</section>
</section>
<section id="issues-in-the-book-chapters" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Issues in the book chapters</h1>
<p>Reports of errors and suggestions for enhancements are welcome, for the chapters in the published book, preferably as Issues raised at <a href="https://github.com/aphalo/learnr-book-crc/issues" class="uri">https://github.com/aphalo/learnr-book-crc/issues</a>.</p>
</section>
<section id="issues-in-supplementary-chapters" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Issues in supplementary chapters</h1>
<p>Reports of errors and suggestions for enhancements are welcome, for <em>this supplement</em> preferably as Issues raised at <a href="https://github.com/aphalo/learnr-book-extra/issues" class="uri">https://github.com/aphalo/learnr-book-extra/issues</a>; the source of the supplement is at <a href="https://github.com/aphalo/learnr-book-extra" class="uri">https://github.com/aphalo/learnr-book-extra</a>.</p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a></div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/www\.learnr-book\.info\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://orcid.org/0000-0003-3385-972X">
<p>P. J. Aphalo @ ORCID</p>
</a>
  </li>  
</ul>
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 Learn R: As a Language
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="./about.html">
<p>© 2015-2024 Pedro J. Aphalo</p>
</a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>